# H5 Multi-tenant Environment Variables for MuniStream Keycloak
# These variables are injected by the CI/CD pipeline based on the target environment

# Aurora PostgreSQL 17 Database (injected by CI/CD)
AURORA_ENDPOINT=munistream-dev-cluster.cluster-ckf4usc8u21l.us-east-1.rds.amazonaws.com
DB_PASSWORD=${DB_PASSWORD}

# Keycloak Admin Credentials (injected by CI/CD from SSM)
KEYCLOAK_ADMIN=${KEYCLOAK_ADMIN:-admin}
KEYCLOAK_ADMIN_PASSWORD=${KEYCLOAK_ADMIN_PASSWORD:-admin123}

# Environment Configuration
APP_ENV=development
DEPLOYMENT_TARGET=h5-workflow-ec2
KC_LOG_LEVEL=${KC_LOG_LEVEL:-INFO}

# Client-specific hostnames (for ALB routing)
CORE_HOSTNAME=core-dev.munistream.local
CONAPESCA_HOSTNAME=conapesca-dev.munistream.local
TESO_HOSTNAME=tesoreriacdmx-dev.munistream.local

# Keycloak Ports per Client
KEYCLOAK_CORE_PORT=9000
KEYCLOAK_CONAPESCA_PORT=9001
KEYCLOAK_TESO_PORT=9002

# Database Names per Client
KC_DB_CORE=keycloak_core
KC_DB_CONAPESCA=keycloak_conapesca
KC_DB_TESO=keycloak_tesoreriacdmx

# Realm Import Paths
REALM_CORE_PATH=/opt/keycloak/data/import
REALM_CONAPESCA_PATH=/opt/keycloak/data/import
REALM_TESO_PATH=/opt/keycloak/data/import

# Theme Paths per Client
THEME_CORE_PATH=/opt/keycloak/themes/core
THEME_CONAPESCA_PATH=/opt/keycloak/themes/conapesca
THEME_TESO_PATH=/opt/keycloak/themes/tesoreriacdmx

# External Provider JAR
PROVIDERS_PATH=/opt/keycloak/providers

# Keycloak Features
KC_FEATURES=token-exchange,admin-fine-grained-authz,hostname:v2

# Health and Metrics
KC_HEALTH_ENABLED=true
KC_METRICS_ENABLED=true

# Hostname configuration for ALB proxy
KC_PROXY=edge
KC_HOSTNAME_STRICT=false
KC_HOSTNAME_STRICT_HTTPS=false
KC_HTTP_ENABLED=true
KC_HTTP_PORT=8080

# Client-specific paths (for nginx ALB routing)
KC_HOSTNAME_PATH_CORE=/api/auth
KC_HOSTNAME_PATH_CONAPESCA=/api/auth
KC_HOSTNAME_PATH_TESO=/api/auth